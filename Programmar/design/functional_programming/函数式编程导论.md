# 函数式编程导论

## 前言

本文介绍函数式编程

## 定义

函数式编程是种编程方式，它将电脑运算视为函数的计算。函数编程语言最重要的基础是λ演算（lambda calculus），而且λ演算的函数可以接受函数当作输入（参数）和输出（返回值）。

看不懂吧，看不懂也没关系，毕竟我们是要用它，不是去背诵它然后拿分。

我们仅需要知道这个编程范式中的一些思想以及它的特性，只要这些思想与这些特性可以让我们写出更优雅，维护成本更低的代码，就是好的。

不过我们可以与其他编程范式比较一下代码组织方式：

- 面向过程编程：以过程代码为原点，进行代码组织。
- 面向对象编程：以类和对象为基础，进行代码组织。
- 函数式编程：以函数为基础，进行代码组织。

就像我们用面向对象编程的时候不会抛弃面向过程编程的组织方式一样，我们也不需要在使用函数式编程后就抛弃掉面向对象编程与面向过程编程的思想。

## 特性

### "函数"是第一等公民

并不是指函数拥有超然的地位，仅仅指函数也可以作为值，赋值给其他变量，可以作为参数传入另一个函数，或者成为别的函数的返回值。

### 闭包

直接使用一段代码 (golang) 进行解释：

```golang
func prefixedGreet (p string) func(string) string {
   return func(n string) string {
        return greet(p,n)
   }
} 
```

调用这个函数时，返回的函数就是一个 closure，即一个闭包。返回的函数是可以访问到 `p` 这个参数的。

可以访问到 `p` 的特性我们称之为闭包记忆。

### 声明式代码

看一个例子

```javascript
// 命令式
var makes = [];
for (i = 0; i < cars.length; i++) {
    makes.push(cars[i].make);
}


// 声明式
var makes = cars.map(function (car) {
    return car.make;
});
```

其中命令式代码表达出来的是**怎么做**，而声明式代码表达出来的是**做什么**。

声明式代码的可读性要远高于命令式代码，毕竟命令式代码往往要读完，梳理一下才知道这是要**做什么**。而一般维护者要维护代码的第一步就是知道这个代码是做什么的。声明式代码给出了捷径。

### 无副作用

一般没有副作用的函数我们会称之为**纯函数**。

什么是副作用？

> 副作用是在计算结果的过程中，系统状态的一种变化，或者与外部世界进行的可观察的交互。

一般副作用包含但不限于：

- 修改了传入的参数的内容，例如往传入的 map 里面加了点杂质。
- 更改文件系统
- 往数据库插入记录
- 发送一个 http 请求
- 可变数据
- 打印/log
- 获取用户输入
- DOM 查询
- 访问系统状态

无副作用是一件好事，它能让我们的函数保持健壮性，并且易于测试且测试通过后就具备极高的稳定性。

但是这并不是说我们要抛弃副作用，如果我们的程序不和现实交互，我们还要这个程序做什么呢？

所以函数式编程在这个领域一般表现为极力缩减副作用范围，以降低运维成本。毕竟，一般出现问题的领域，都出现在与现实打交道的环节上。

## 参考文献

1. [函数式编程——百度百科](https://baike.baidu.com/item/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/4035031?fr=aladdin)
2. [函数式编程指北](https://llh911001.gitbooks.io/mostly-adequate-guide-chinese/content/)